<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Administration des Missions</title>
</head>
<body>
    <h1>Administration des Missions</h1>

    <form method="POST">
        <h2>Ajouter une Mission</h2>
        <label>Titre:</label>
        <input type="text" name="titre" required>
        <label>Destination:</label>
        <input type="text" name="destination" required>
        <label>Personnel:</label>
        <select name="personnel_id">
            {% for personnel in personnels %}
            <option value="{{ personnel.id }}">{{ personnel.nom }} {{ personnel.prenom }}</option>
            {% endfor %}
        </select>
        <label>Voiture:</label>
        <select name="voiture_id">
            {% for voiture in voitures %}
            <option value="{{ voiture.id }}">{{ voiture.marque }} ({{ voiture.matricule }})</option>
            {% endfor %}
        </select>
        <label>Projet:</label>
        <select name="projet_id">
            {% for projet in projets %}
            <option value="{{ projet.id }}">{{ projet.nom_projet }}</option>
            {% endfor %}
        </select>
        <button type="submit">Ajouter Mission</button>
    </form>

    <h2>Liste des Missions</h2>
    <table>
        <tr>
            <th>Titre</th>
            <th>Destination</th>
            <th>Personnel</th>
            <th>Voiture</th>
            <th>Projet</th>
            <th>Actions</th>
        </tr>
        {% for mission in missions %}
        <tr>
            <td>{{ mission.titre }}</td>
            <td>{{ mission.destination }}</td>
            <td>{{ mission.personnel.nom }} {{ mission.personnel.prenom }}</td>
            <td>{{ mission.voiture.marque }} ({{ mission.voiture.matricule }})</td>
            <td>{{ mission.projet.nom_projet }}</td>
            <td>
                <a href="{{ url_for('edit_mission', mission_id=mission.id) }}">Modifier</a>
                <a href="{{ url_for('delete_mission', mission_id=mission.id) }}" onclick="return confirm('Êtes-vous sûr de vouloir supprimer cette mission ?');">Supprimer</a>
            </td>
        </tr>
        {% endfor %}
    </table>
</body>
</html>
